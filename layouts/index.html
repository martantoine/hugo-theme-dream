{{ define "main"}}

{{ $allPosts := where site.RegularPages "Type" "posts" }}
{{ $highlightedPosts := where $allPosts "Params.highlighted" true }}
{{ $otherPosts := where $allPosts "Params.highlighted" "!=" true }}

{{ if site.Params.zenMode }}
  {{ if $highlightedPosts }}
  <h2 class="text-2xl font-bold mt-8 mb-4 px-4">Highlighted Projects</h2>
  <div class="dream-zen-posts max-w-[65ch] mt-8 mx-auto px-4 space-y-8">
    {{ range $highlightedPosts }}
      {{ .Render "zen-summary" }}
    {{ end }}
  </div>
  {{ end }}

  {{ if $otherPosts }}
  <h2 class="text-2xl font-bold mt-12 mb-4 px-4">Other Projects</h2>
  <div class="dream-zen-posts max-w-[65ch] mt-8 mx-auto px-4 space-y-8">
    {{ range $otherPosts }}
      {{ .Render "zen-summary" }}
    {{ end }}
  </div>
  {{ end }}
{{ else }}
  {{ if $highlightedPosts }}
  <h2 class="text-2xl font-bold mb-4 px-4">Highlighted Projects</h2>
  <div class="dream-grid opacity-0">
    {{ range $highlightedPosts }}
      <div class="w-full md:w-1/2 lg:w-1/2 xl:w-1/2 p-4 dream-column">
        {{ .Render "summary" }}
      </div>
    {{ end }}
  </div>
  {{ end }}

  {{ if $otherPosts }}
  <h2 class="text-2xl font-bold mt-12 mb-4 px-4">Other Projects</h2>
  <div class="dream-grid opacity-0">
    {{ range $otherPosts }}
      <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
        {{ .Render "summary" }}
      </div>
    {{ end }}
  </div>
  {{ end }}
{{ end }}

{{ end }}

{{ define "js" }}

{{ if site.Params.Experimental.jsDate }}
{{ partial "luxon.html" . }}
{{ end }}

{{ end }}
